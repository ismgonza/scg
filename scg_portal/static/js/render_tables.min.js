function renderTable(data, tableId, keyField, columnHeader) {
    const counts = {};
    data.forEach(item => {
        const key = item[keyField];
        const category = item.risk_category;
        if (!counts[key]) {
            counts[key] = {
                Critical: 0,
                High: 0,
                Medium: 0,
                Low: 0,
                Informational: 0
            };
        }
        counts[key][category]++;
    });

    const table = document.getElementById(tableId);
    table.innerHTML = '<div class="table-responsive"><table class="table table-striped"><thead><tr><th style="background-color: #002d74; color: white;">' + columnHeader + '</th><th style="background-color: rgba(112,48,160,0.7);">Critical</th><th style="background-color: rgba(192,1,0,0.7);">High</th><th style="background-color: rgba(255,153,50,0.7);">Medium</th><th style="background-color: rgba(255,204,3,0.7);">Low</th><th style="background-color: rgba(153,204,2,0.7);">Informational</th></tr></thead><tbody></tbody></table></div>';

    const tbody = table.querySelector('tbody');
    const keys = Object.keys(counts).sort((a, b) => {
        const aSum = Object.values(counts[a]).reduce((acc, val) => acc + val, 0);
        const bSum = Object.values(counts[b]).reduce((acc, val) => acc + val, 0);
        return bSum - aSum;
    }).slice(0, 10);
    keys.forEach(key => {
        const row = document.createElement('tr');
        row.innerHTML = `<td>${key}</td>`;
        const categories = ['Critical', 'High', 'Medium', 'Low', 'Informational'];
        categories.forEach(category => {
            const cell = document.createElement('td');
            cell.textContent = counts[key][category] || 0;
            row.appendChild(cell);
        });
        tbody.appendChild(row);
    });
}


window.renderTable = renderTable;